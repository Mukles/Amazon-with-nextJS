import Head from 'next/head';
import { wrapper } from '../redux/store';
import axios from 'axios';
import Layout from '../src/Layout/Layout';
import Banner from '../src/Banner';
import ProductFeed from '../src/Product/ProductFeed';
import { useEffect } from 'react';

export default function Home({ products }) {
  useEffect(() =>{
  })
  return (
    <section id=
    'home' className='bg-gray-100'>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Layout>
        <main className='max-w-screen-2xl mx-auto'>
          <Banner />
          <ProductFeed products={products} />
        </main>
      </Layout>
    </section >
  )
}

export const getServerSideProps = wrapper.getServerSideProps(store => async () => {
  try {
    const { data } = await axios.get('https://localhost:44304/api/Product').then(res => res);
    return {
      props: {
        products: data
      }
    }
  }
  catch (err) {
    return {
      props: {
        products: []
      }
    }
  }
});